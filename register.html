<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta placeholder="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Register</title>
</head>

<body class="body">
    <header class="flex" id="header">
        <h1>TAP</h1>
    </header>

    <form method="POST" placeholder="register" class="flex" id="regForm_register">
        <!-- Customer Details -->
        <section class="flex login">
            <h3>Login</h3>
            <input type="text" placeholder="Email" id="regForm_email_login">
            <input type="text" placeholder="Password" id="regForm_password_login">
            <div class="login">
                <input type="button" class="regButton" id="loginBtn" value="Login Existing User" />
                <input type="button" class="regButton" id="registerBtn" value="Register New User" />
            </div>
        </section>

        <section class="flex personal hidden">
            <h3>Personal Details</h3>
            <input type="text" placeholder="Email" id="regForm_email" required>
            <input type="text" placeholder="Password" id="regForm_password" required>
            <input type="text" placeholder="First Name" id="regForm_firstName" required>
            <input type="text" placeholder="Surname" id="regForm_lastName" required>
            <input type="text" placeholder="House Number" id="regForm_houseNumber" required>
            <input type="text" placeholder="Street" id="regForm_houseStreet" required>
            <input type="text" placeholder="Post Code" id="regForm_postCode" required>
            <input type="text" placeholder="City" id="regForm_city" required>
            <input type="text" placeholder="Country" id="regForm_country" required>
            <input type="text" placeholder="Mobile Number" id="regForm_phone" required>
            <br>
            <input type="button" class="regButton" id="goToPayments" value="Enter Payment Details" />

        </section>

        <section class="flex payment hidden">
            <h3>Payment Details</h3>
            <input type="text" placeholder="Card, Klarna or Paypal?" id="regForm_cardType" required>
            <input type="text" placeholder="Card Number" id="regForm_cardNumber" required>
            <input type="text" placeholder="Expiry Month" id="regForm_expMonth" required>
            <input type="text" placeholder="Expiry Year" id="regForm_expYear" required>
            <input type="text" placeholder="CVC" id="regForm_cvc" required>
            <input type="text" placeholder="Visa or Mastercard?" id="regForm_cardBrand" required>
            <br>
            <input type="button" class="regButton" id="goToPrefs" value="Enter Shopping Preferences" />
        </section>

        <section class="flex preference hidden">
            <h3>Preference Details</h3>
            <div class="flex" id="preferenceInput"></div>
            <div class="prefUtil flex hidden">
                <input type="button" class="regButton" id="addPeference" value="Add Preference">
            </div>
            <div class="utils hidden">
                <input type="submit" class="regButton" id="regForm_submit" value="Register User">
                <input type="reset" class="regButton" id="regForm_reset" value="Reset Form">
            </div>
        </section>

    </form>
    <script class="tapCDN" src="tap.js"></script>
    <script>

        document.querySelector("#registerBtn").addEventListener("click", () => {
            toggleDisplay(document.querySelector(".personal"))
        })

        document.querySelector("#goToPayments").addEventListener("click", () => {
            toggleDisplay(document.querySelector(".payment"))
        })

        document.querySelector("#goToPrefs").addEventListener("click", () => {
            toggleDisplay(document.querySelector(".preference"))
            preferenceCategory()
        })

        document.querySelector("#addPeference").addEventListener("click", (e) => {
            e.preventDefault();
            addPreference()
        })       

        document.querySelector('#regForm_register').addEventListener('submit', async (e) => {
            e.preventDefault();
            preferenceCheck()
        })

        document.querySelector("#loginBtn").addEventListener("click", (e)=>{    
            e.preventDefault()
            generateModal()
        })

    </script>

</body>

</html>